const S=/rgba?\s*\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})(?:\s*,\s*(\d*\.?\d+))?\s*\)/,p=/^#(?:([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})|([0-9A-Fa-f]{1})([0-9A-Fa-f]{1})([0-9A-Fa-f]{1}))$/;function y(t){return t.r!=null&&t.g!=null&&t.b!=null}function g(t){return t.h!=null&&t.s!=null&&t.v!=null}function w(t){let e=t.match(S);if(e!=null){const n=parseInt(e[1].trim()),r=parseInt(e[2].trim()),s=parseInt(e[3].trim());if(isNaN(n)||isNaN(r)||isNaN(s))throw new Error("Invalid RGB color.");let o=1;return e[4]!=null&&(o=parseFloat(e[4].trim()),isNaN(o)&&(o=1)),{r:n,g:r,b:s,a:o}}}function k(t){const e=t.match(p);if(e!=null){const n=e[4]!==void 0,r=parseInt(n?e[4]+e[4]:e[1],16),s=parseInt(n?e[5]+e[5]:e[2],16),o=parseInt(n?e[6]+e[6]:e[3],16);return{r,g:s,b:o}}}function h(t){if(typeof t=="string"){let e=k(t);if(e==null&&(e=w(t)),e!=null)return e;throw new Error("Invalid color string")}else{if(y(t))return t;if(g(t))return $(t);throw new Error("Invalid color")}}function M(t){if(g(t))return t;const e=h(t),n=e.r/255,r=e.g/255,s=e.b/255;let o=Math.max(n,r,s),u=Math.min(n,r,s),c=o-u,f=o,i=o===0?0:c/o,a=0;if(o===u)a=0;else switch(o){case n:a=((r-s)/c+(r<s?6:0))/6;break;case r:a=((s-n)/c+2)/6;break;case s:a=((n-r)/c+4)/6;break}return a=a*360,{h:a,s:i,v:f}}function $(t){let e=t.s,n=t.v;e>1&&(e/=100),n>1&&(n/=100);const r=t.h;var s=Math.floor(r/60)%6,o=r/60-Math.floor(r/60),u=n*(1-e),c=n*(1-o*e),f=n*(1-(1-o)*e);let i=0,a=0,l=0;switch(s){case 0:i=n,a=f,l=u;break;case 1:i=c,a=n,l=u;break;case 2:i=u,a=n,l=f;break;case 3:i=u,a=c,l=n;break;case 4:i=f,a=u,l=n;break;case 5:i=n,a=u,l=c;break}return i=Math.round(i*255),a=Math.round(a*255),l=Math.round(l*255),{r:i,g:a,b:l}}function I(t,e,n){let r;return Math.round(t.h)>=60&&Math.round(t.h)<=240?r=n?Math.round(t.h)-2*e:Math.round(t.h)+2*e:r=n?Math.round(t.h)+2*e:Math.round(t.h)-2*e,r<0?r+=360:r>=360&&(r-=360),r}function T(t,e,n){if(t.h===0&&t.s===0)return t.s;let r;return n?r=t.s-.16*e:r=t.s+.05*e,r>1&&(r=1),r<.06&&(r=.06),Number(r.toFixed(2))}function x(t,e,n){let r;return n?r=t.v+.05*e:r=t.v-.15*e,r>1&&(r=1),Number(r.toFixed(2))}function d(t){const e=n=>n.toString(16).padStart(2,"0");return`#${e(t.r)}${e(t.g)}${e(t.b)}`.toUpperCase()}function N(t){return typeof t=="string"&&p.test(t)?t:d(h(t))}function m(t,e=1,n=!0){const r=M(t);return N({h:I(r,e,n),s:T(r,e,n),v:x(r,e,n)})}function b(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":window.matchMedia("(prefers-color-scheme: light)").matches?"light":"auto"}async function F(t,e=!0){return new Promise(n=>{const r=document.documentElement.classList;t==null&&(t=b());function s(){t==="light"?(r.add("light"),r.remove("dark")):t==="dark"?(r.add("dark"),r.remove("light")):r.remove("light","dark")}e&&document.startViewTransition?document.startViewTransition(()=>{s(),n(t)}):(s(),n(t))})}function C(){let t=document.documentElement.className.match(/light|dark/);return t!=null&&(t=t[0]),t==null&&(t=localStorage.getItem("web-theme-appearance")),t==null&&(t=b()),t}async function E(t,e=!0,n=!0){return e===!0&&localStorage.setItem("web-theme-appearance",t??"auto"),F(t,n)}function H(t){const e=document.documentElement,n=e.className.match(/color-([0-9a-fA-F]{6})/);if(n==null){let r=getComputedStyle(e).getPropertyValue("--nt-primary-color");return r===""&&(r=localStorage.getItem("web-theme-color")),r||t}return`#${n[1]}`}async function v(t){const e=[`--nt-primary-color: ${t};`,`--l-primary-color: ${t};`,`--nt-primary-color-dark1: ${m(t,1,!1)};`,`--l-primary-color-dark1: ${m(t,1,!1)};`];for(let r=1;r<=5;r++)e.push(`--nt-primary-color-light${r}: ${m(t,r)};`),e.push(`--l-primary-color-light${r}: ${m(t,r)};`);let n=document.getElementById("color-theme-style");return n==null&&(n=document.createElement("style"),n.id="color-theme-style",document.head.appendChild(n)),n.innerHTML=`:root{${e.join("")}}`,t}function A(t,e=!0){return e===!0&&localStorage.setItem("web-theme-color",t),v(t)}export{m as a,E as b,H as c,A as d,C as g,F as t};

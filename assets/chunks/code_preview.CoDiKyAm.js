var p=Object.defineProperty;var d=(n,a,s)=>a in n?p(n,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[a]=s;var c=(n,a,s)=>d(n,typeof a!="symbol"?a+"":a,s);import{e as l,a as h,m as r}from"./dom.DwYf1ZNH.js";class m extends HTMLElement{constructor(){super();c(this,"handleCollapse");this.handleCollapse=this._handleCollapse.bind(this)}connectedCallback(){const s=l(".source",this)[0],t=l("textarea",this)[0];let e="",i="";s==null?t==null?e=`<textarea lang="html">${this.innerHTML}</textarea>`:e=t.outerHTML:e=s.innerHTML,e.startsWith("<textarea")||(e=`<textarea lang="html">${e}</textarea>`),t==null?i=this.innerHTML:i=t.value;const o=['<div class="code-preview">',`<div class="preview-container">${i}</div>`,'<div class="operate-container">','<l-button text type="primary" id="collapse-btn">','<l-caret-top-icon class="collapse-icon"></l-caret-top-icon>',"<span>查看源代码</span>","</l-button></div>",`</div><template>${e}</template>`];this.innerHTML=o.join(""),this._initEvents()}disconnectedCallback(){l("#collapse-btn",this)[0].removeEventListener("click",this.handleCollapse)}_initEvents(){h(l("#collapse-btn",this)[0],"click",this.handleCollapse)}_handleCollapse(s){const t=s.currentTarget;let e=l("l-source-code",this)[0];if(t.classList.contains("open"))t.classList.remove("open"),r(l("span",t)[0],"查看源代码"),e.style.display="none";else if(t.classList.add("open"),r(l("span",t)[0],"隐藏源代码"),e==null){const i=l(".code-preview",this)[0];e=document.createElement("l-source-code");const o=l("template",this)[0];e.innerHTML=`<div class="template" style="display:none;">${o.innerHTML}</div>`,i.appendChild(e)}else e.style.display="block"}}export{m as default};
